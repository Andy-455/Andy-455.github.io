(function(e){function t(t){for(var s,_,r=t[0],i=t[1],n=t[2],d=0,c=[];d<r.length;d++)_=r[d],Object.prototype.hasOwnProperty.call(o,_)&&o[_]&&c.push(o[_][0]),o[_]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);h&&h(t);while(c.length)c.shift()();return l.push.apply(l,n||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],s=!0,r=1;r<a.length;r++){var i=a[r];0!==o[i]&&(s=!1)}s&&(l.splice(t--,1),e=_(_.s=a[0]))}return e}var s={},o={app:0},l=[];function _(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,_),a.l=!0,a.exports}_.m=e,_.c=s,_.d=function(e,t,a){_.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},_.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},_.t=function(e,t){if(1&t&&(e=_(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(_.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)_.d(a,s,function(t){return e[t]}.bind(null,s));return a},_.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return _.d(t,"a",t),t},_.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},_.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var n=0;n<r.length;n++)t(r[n]);var h=i;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(e){var t=l(e);return a(t)}function l(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=l,e.exports=o,o.id="4678"},"4c2d":function(e,t,a){},"54d8":function(e,t,a){"use strict";a("4c2d")},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},l=[],_=(a("034f"),a("2877")),r={},i=Object(_["a"])(r,o,l,!1,null,null,null),n=i.exports,h=a("8c4f"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"HisReplay"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.xgsj_5_to_day}},[e._v("xgsj 5整成天")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save_data}},[e._v("存csv")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.get_day_obj_list_csv}},[e._v("day_vibrate 预测")]),a("br"),e._m(0),a("el-date-picker",{staticClass:"small_width",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.selected_day,callback:function(t){e.selected_day=t},expression:"selected_day"}}),a("br"),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.forecast_before_10}},[e._v("10点前预测")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.forecast_after_10}},[e._v("10点后预测")]),a("br"),a("div",[a("div",[e._v("5日预测："+e._s(e.day_5_for_val))]),a("div",[e._v("早盘预测：日振幅1: "+e._s(e.forecast1)+" -- 日振幅2："+e._s(e.forecast2))]),a("br"),a("span",[e._v("看涨 看跌：")]),a("el-switch",{model:{value:e.is_up_or_down,callback:function(t){e.is_up_or_down=t},expression:"is_up_or_down"}}),a("br"),a("span",[e._v(e._s(e.is_up_or_down?"输入低点":"输入高点")+":")]),a("el-input",{staticClass:"small_width",attrs:{placeholder:"请输入"},model:{value:e.input_low_or_high,callback:function(t){e.input_low_or_high=t},expression:"input_low_or_high"}}),a("div",[e._v("5日预估："+e._s(e.target0)+" --目标价: "+e._s(e.target1)+" -- ："+e._s(e.target2))])],1)],1)},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h4",[e._v("一天准备：")]),a("p",[e._v("30分")]),a("p",[e._v("60分统计资料")]),a("p",[e._v("近一个月高低表")]),a("p",[e._v("近期日震幅变化")])])}],u=a("c1df"),f=a.n(u),b={is_in_company:!0,is_output_log:!1,his_date_date:"2021_12_20",show_need_bar_num:80,longLog(){console.log("-------------------------------------------------------------------------------")},copyObj(e){return JSON.parse(JSON.stringify(e||""))},toFixed(e,t){let a=Number(e||0),s=a.toFixed(t),o=Number(s||0);return o},openInTV(e){let t=e.split(":"),a=t[0],s=t[1],o=`https://cn.tradingview.com/chart/0ZToVShK/?symbol=${a}%3A${s}`;window.open(o)}},g={find_in_time(e,t){let a,s,o=-1,l=!1;for(a=e.length-1;a>=0;a--){s=e[a],b.is_output_log&&a<3&&console.log("i: "+a+" date",s);let _=f()(s).format("YYYY-MM-DD")==f()(t).format("YYYY-MM-DD"),r=f()(s).valueOf()<=f()(t).valueOf();l||!_&&!r||(l=!0,o=a)}return o},boll_open(e,t,a){let s,o,l=[];e.forEach((e,a)=>{s=t[a],o=e-s,o=b.toFixed(o,5),l.push(o)});let _=this.price_rise(l,a);return _},get_indicate_price_rise2(e=[2,1,0,3,4,5,4,7,8,10]){let t,a,s=[],o=365/7*5;return e.forEach((function(l,_){0==_?s[_]=0:(a=e[_-1],t=e[_]-a,s[_]=a>0?b.toFixed(t/a*100*o,1):0)})),s},price_rise_rate(e,t){let a=0,s=e.length;if(t[0]>s)return void console.error("price_rise idx_list 下标越界");let o,l,_=!0,r=t.length;for(let b=0;b<r-1;b++)o=t[b],l=t[b+1],e[s-o]>e[s-l]&&(_=!1);let i=!0;for(let b=0;b<r-1;b++)o=t[b],l=t[b+1],e[s-o]<e[s-l]&&(i=!1);o=t[0],l=t[r-1];let n=e[s-l],h=e[s-o],d=n-h,c=0,u=365/7*5,f=o-l;return h>0&&(c=b.toFixed(d/n*100/f*u,1)),a=_||i?c:-999,a},get_list_1_2_yearly_rate(e,t,a,s){if(e.length!=t.length)return console.warn(a.symbol+"  "+s+" list1, list2长度不一致！",a),-999;if(e.length<2)return console.warn(a.symbol+"  "+s+" list1长度过短！",a),-999;if(t.length<2)return console.warn(a.symbol+"  "+s+" list2长度过短！",a),-999;let o=0,l=e.length,_=e[l-1]-t[l-1],r=e[l-2]-t[l-2],i=365/7*5;if(r&&r>0){let e=(_-r)/r;s.startsWith("boll_")&&(e/=4),o=e*i,o*=100,o=b.toFixed(o,3)}return o},get_yearly_rate(e){let t=0,a=e.length;if(a<2)return console.warn("get_yearly_rate ma_list长度过短！"),-999;let s=e[a-1],o=e[a-2],l=365/7*5;if(o&&o>0){let e=(s-o)/o;t=e*l,t*=100,t=b.toFixed(t,3)}return t},get_indicate_yearly_rate(e=[2,1,0,3,4,5,4,7,8,10]){let t=[],a=this;return e.forEach((function(s,o){if(o<1)t[o]=0;else{let s=e.slice(o-1,o+1);t[o]=a.get_yearly_rate(s)}})),t},get_indicate_boll_open(e,t,a){let s,o,l,_=[];e.forEach((e,a)=>{s=t[a],o=e-s,l=b.toFixed(o/4,5),_.push(l)});let r=this.get_indicate_price_rise(_,a);return r},get_indicate_2ma_open(e,t,a){let s,o,l,_=[];e.forEach((e,a)=>{s=t[a],o=e-s,l=b.toFixed(o,5),_.push(l)});let r=this.get_indicate_price_rise(_,a);return r},get_indicate_price_rise(e=[2,1,0,3,4,5,4,7,8,10],t=[3,2,1]){let a=[],s=t[0],o=this;return e.forEach((function(l,_){if(_<s-1)a[_]=-999999;else{let l=_+1,r=l-s,i=e.slice(r,l);a[_]=o.price_rise_rate(i,t)}})),a},get_ma(e,t=20){let a=[];return e.forEach((function(s,o){if(o<t-1)a[o]="";else{let s=0;for(let a=0;a<t;a++)s+=e[o-a];let l=s/t;a[o]=Number(l.toFixed(3)||0)}})),a},get_boll(e,t,a){void 0===t&&(t=20),void 0===a&&(a=2);var s=[[],[],[]],o=s[0],l=s[1],_=s[2],r=[0,0],i=r[0],n=r[1],h=t-1;let d=0,c=0,u=0;return e.forEach((function(s,r){i+=s;var f=[0,0,0,0],b=f[0],g=f[1],v=f[2],p=f[3];r>=h?(i-=n,n=e[p=r-h],b=i/t,v=e.slice(p,p+t).reduce((function(e,t){return e+Math.pow(t-b,2)}),0),g=Math.sqrt(v/t),d=b,l[r]=Number(d.toFixed(5)||0),c=b+a*g,o[r]=Number(c.toFixed(5)||0),u=b-a*g,_[r]=Number(u.toFixed(5)||0)):(o[r]=0,l[r]=0,_[r]=0)})),o.forEach((e,t)=>{0==e&&(o[t]="")}),l.forEach((e,t)=>{0==e&&(l[t]="")}),_.forEach((e,t)=>{0==e&&(_[t]="")}),{up:o,ma:l,low:_}}},v=a("bc3a"),p=a.n(v),y={keyFun(e){e=e.trim();let t=e.length,a=e.substring(1,t-1);return a=a.toLowerCase(),a},csv_to_list(e,t=!1,a=",",s=!1){return new Promise((function(o,l){p.a.get(e,{responseType:"blob"}).then(e=>{let l=new FileReader;l.readAsText(e.data),l.onload=function(e){let l,_=e.target.result,r=_.split(/\r?\n|\r/),i="",n="";b.is_output_log&&console.log(" readCsv has_header_name: ",t),s?l=r:t?[i,n,...l]=r:[n,...l]=r;let h=t&&i?i.split(a):[];b.is_output_log&&console.log(" readCsv reader headerNameList: ",h);let d=n?n.split(a):[];b.is_output_log&&console.log(" readCsv reader headerCodeList: ",d),b.is_output_log&&console.log("readCsv reader dataStrList[1:11]\n",l.slice(0,11)),o({headerNameList:h,headerCodeList:d,dataStrList:l})}}).catch(e=>{l(e)})}))},read_csv(e,t=!1,a=",",s=null,o=null){let l=this;return new Promise((function(_,r){l.csv_to_list(e,t,a).then(({headerCodeList:e,dataStrList:t})=>{b.is_output_log&&console.log("read_csv res:",e);let l,r,i,n=[];t.forEach(t=>{t&&(i={},r=t.split(a),b.is_output_log&&console.log("read_csv csvLineList:",r),e.forEach((e,t)=>{s&&(e=s(e)),l=r[t],o&&o.includes(e)&&(l=Number(l||0),l=b.toFixed(l,4)),i[e]=l}),b.is_output_log&&console.log("csv_line_data:",i),n.push(i))}),_(n)}).catch(e=>{console.error("read_csv err:",e),r(e)})}))},save_data_to_csv(e,t,a=["date_time","ctm","open","high","low","close","vol"]){let s,o=a.join();o+="\r\n",e.forEach(e=>{a.forEach(t=>{s=e[t],o+="vol"===t?s:s+","}),o+="\r\n"}),o="data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(o);let l=document.createElement("a");l.href=o,l.download=t+".csv",document.body.appendChild(l),l.click(),document.body.removeChild(l)}},m={data(){return{}},methods:{xgsj_5_to_day(){let e="xgsj_MAM_5m.csv";y.read_csv(e,!1,",",null,["open","high","low","close","vol"]).then(e=>{console.log("get_his_data res1:",b.copyObj(e)),e=this.data_format2(e),console.log("get_his_data res4:",b.copyObj(e)),e=this.get_whole_day_list(e),console.log("get_his_data res5:",b.copyObj(e));let{day_list:t,day_obj_list:a}=this.get_day_obj_list(e,5);this.day_obj_list=a}).catch(e=>{console.error("get_his_data err:",e)})},get_day_list(e){let t=[];e.forEach(e=>{t.includes(e.date)||t.push(e.date)}),console.log("day_list:",t);let a,s,o=[],l=[];t.forEach(t=>{l=[],e.forEach(e=>{a&&e.date===a&&e.hour>15&&l.push(e),e.date===t&&e.hour<=15&&l.push(e)}),a=t;let{open:_,high:r,low:i,close:n,vol:h}=this.handle_day_ohlc(l);s={day:t+" 15:00:00",list:l,open:_,high:r,low:i,close:n,vol:h},o.push(s)}),console.log("day_obj_list",b.copyObj(o));let _=this.symbol+"_d1";y.save_data_to_csv(o,_,["day","open","high","low","close","vol"])},handle_day_ohlc(e){let t=0,a=0,s=0,o=e.length;e[0]&&e[0].open&&(t=e[0].open),o-1>=0&&e[o-1]&&e[o-1].close&&(a=e[o-1].close);let l,_,r=[],i=[];return e.forEach(e=>{r.push(e.high),i.push(e.low),s+=e.vol}),r.length&&(l=Math.max.apply(null,r)),i.length&&(_=Math.min.apply(null,i)),{open:t,high:l,low:_,close:a,vol:s}},data_format2(e){let t,a,s,o;return e.forEach(e=>{t=new Date(e.t_time),a=t.toLocaleDateString(),s=t.toTimeString().slice(0,5),o=a+" "+s,e.date=a,e.time=s,e.week_day=t.getDay(),e.date_time=o,e.year=t.getFullYear(),e.hour=t.getHours()}),e},jjsj_15_to_day(){let e="jjsj/MA9999_m15.csv";y.read_csv(e,!1,",",null,["open","high","low","close","vol"]).then(e=>{console.log("get_his_data res1:",b.copyObj(e)),e=this.time_subtract_15_m(e),console.log("get_his_data res3:",b.copyObj(e)),e=this.data_format(e),console.log("get_his_data res4:",b.copyObj(e)),e=this.get_whole_day_list(e),console.log("get_his_data res5:",b.copyObj(e));let{day_list:t,day_obj_list:a}=this.get_day_obj_list(e);this.day_obj_list=a}).catch(e=>{console.error("get_his_data err:",e)})},tbj_15_to_day(){let e="tbj/MAM_m15.csv";y.read_csv(e,!1,",",null,["open","high","low","close","vol"]).then(e=>{console.log("get_his_data res1:",b.copyObj(e)),e=this.time_subtract_15_m(e),console.log("get_his_data res3:",b.copyObj(e)),e=this.data_format(e),console.log("get_his_data res4:",b.copyObj(e)),e=this.get_whole_day_list(e),console.log("get_his_data res5:",b.copyObj(e));let{day_list:t,day_obj_list:a}=this.get_day_obj_list(e);this.day_obj_list=a}).catch(e=>{console.error("get_his_data err:",e)})},tdx_15_to_day(){let e="tdx/MAL8_m15.csv";y.read_csv(e,!1,",",null,["open","high","low","close","vol"]).then(e=>{e=this.deal_tdx_night(e),e=this.time_subtract_15_m(e),console.log("get_his_data res3:",b.copyObj(e)),e=this.data_format(e),console.log("get_his_data res:",b.copyObj(e)),e=this.get_whole_day_list(e);let{day_list:t,day_obj_list:a}=this.get_day_obj_list(e);this.day_obj_list=a}).catch(e=>{console.error("get_his_data err:",e)})},save_data(){let e=this.symbol+"_day_obj";y.save_data_to_csv(this.day_obj_list,e,["day","h1_vol","h1_vibrate","day_vibrate","day_high","day_low"])},get_day_obj_list(e,t){let a=[];e.forEach(e=>{a.includes(e.date)||a.push(e.date)}),console.log("day_list:",a);let s,o=[],l=[],_=[],r=[];return a.forEach(a=>{l=[],_=[],r=[],e.forEach(e=>{e.date===a&&(l.push(e),9==e.hour&&_.push(e),9<=e.hour&&e.hour<=15&&r.push(e))}),0===_.length&&console.warn("day_str:",a," h1_list.length === 0");let{h1_vol:i,h1_vibrate:n}=this.handle_h1(_,t);0===r.length&&console.warn("day_str:",a," bt_list.length === 0");let{day_vibrate:h,day_high:d,day_low:c}=this.handle_bt(r,t);s={day:a,h1_vol:i,h1_vibrate:n,list:l,h1_list:_,bt_list:r,day_vibrate:h,day_high:d,day_low:c},o.push(s)}),console.log("day_obj_list",b.copyObj(o)),{day_list:a,day_obj_list:o}},handle_h1(e,t=15){let a=0,s=0,o=4;15!==t&&(o=60/t),e.length!=o&&(15!==t||console.warn(e[0].t_time,"h1_list不是"+o+"个:",b.copyObj(e)));let l,_,r=[],i=[];return e.forEach(e=>{r.push(e.high),i.push(e.low),a+=e.vol}),r.length&&(l=Math.max.apply(null,r)),i.length&&(_=Math.min.apply(null,i)),l&&_&&(s=l-_),{h1_vol:a,h1_vibrate:s}},getZero(e){return parseInt(e)<10&&(e="0"+e),e},handle_bt(e,t=15){let a=15;if(15!==t&&(a=225/t),e.length!=a)if(15!==t){let t,s=[];for(let e=0;e<=55;e+=5)t="09:"+this.getZero(e),s.push(t);for(let e=0;e<=10;e+=5)t="10:"+this.getZero(e),s.push(t);for(let e=30;e<=55;e+=5)t="10:"+this.getZero(e),s.push(t);for(let e=0;e<=25;e+=5)t="11:"+this.getZero(e),s.push(t);for(let e=30;e<=55;e+=5)t="13:"+this.getZero(e),s.push(t);for(let e=0;e<=55;e+=5)t="14:"+this.getZero(e),s.push(t);let o=!1,l=[];s.forEach(t=>{o=!1,e.forEach(e=>{e.time===t&&(o=!0)}),o||l.push(t)}),console.warn(e[0].date,"9点到15点K线数量不是"+a+"个，缺失 "+l.length+"个，分别是:",l)}else console.warn(e[0].t_time,"bt_list不是"+a+"个:",b.copyObj(e));let s,o,l=0,_=[],r=[];return e.forEach(e=>{_.push(e.high),r.push(e.low)}),_.length&&(s=Math.max.apply(null,_)),r.length&&(o=Math.min.apply(null,r)),s&&o&&(l=s-o),{day_vibrate:l,day_high:s,day_low:o}},get_whole_day_list(e){let t,a=e.length;for(let o=0;o<a;o++)if(o>0&&9===e[o].hour&&e[o-1].date!==e[o].date){console.log("第一个完整天 idx:",o," 值：",b.copyObj(e[o])),t=o;break}let s=e.slice(t);return s},data_format(e){let t,a,s;return e.forEach(e=>{t=new Date(e.ctm),a=t.toLocaleDateString(),s=t.toTimeString().slice(0,8),e.date=a,e.time=s,e.week_day=t.getDay(),e.hour=t.getHours()}),e},deal_tdx_night(e){let t,a,s,o,l="";return e.forEach((e,_)=>{t=new Date(e.t_time),s=t.toLocaleDateString(),o=t.toTimeString().slice(0,5),a=t.getHours(),a>19?l&&l!==s&&(e.t_time=l+"-"+o):l=s}),e},time_subtract_15_m(e){let t,a,s,o,l,_;return e.forEach(e=>{t=new Date(e.t_time),a=t.getTime(),s=a-9e5,o=new Date(s),l=o.toLocaleDateString(),_=o.toTimeString().slice(0,5),e.ctm=s,e.date_time=l+" "+_}),e},deal_his_data(e){}}},j={data(){return{}},methods:{handle_h1_vol_list(e,t=20){e.sort((function(e,t){return e.h1_vol_diff_abs-t.h1_vol_diff_abs}));let a=[];e.forEach(e=>{a.includes(e.h1_vol_diff_abs)||a.push(e.h1_vol_diff_abs)});let s=[],o=[],l=0;a.forEach(t=>{o=[],l=0,e.forEach(e=>{t===e.h1_vol_diff_abs&&(l+=e.day_vibrate,o.push(e))}),s.push({h1_vol_diff_abs:t,list:o,num:o.length,day_vibrate_sum:l})});let _=s.length,r=0;l=0;for(let n=0;n<_;n++)if(r+=s[n].num,l+=s[n].day_vibrate_sum,r>t)break;let i=b.toFixed(l/r,1);return i},handle_h1_list(e,t=!0,a=20){let s=t?"h1_vibrate_diff_abs":"";e.sort((function(e,t){return e[s]-t[s]})),console.log("h1_list:",b.copyObj(e));let o=[];e.forEach(e=>{o.includes(e[s])||o.push(e[s])}),console.log("h1_diff_abs_list:",b.copyObj(o));let l=[],_=[],r=0;o.forEach(t=>{_=[],r=0,e.forEach(e=>{t===e.h1_vibrate_diff_abs&&(r+=e.day_vibrate,_.push(e))}),l.push({h1_vibrate_diff_abs:t,list:_,num:_.length,day_vibrate_sum:r})});let i=l.length,n=0;r=0;for(let d=0;d<i;d++)if(n+=l[d].num,r+=l[d].day_vibrate_sum,n>a)break;let h=b.toFixed(r/n,1);return h},handle_h1_vibrate_list(e,t=20){e.sort((function(e,t){return e.h1_vibrate_diff_abs-t.h1_vibrate_diff_abs}));let a=[];e.forEach(e=>{a.includes(e.h1_vibrate_diff_abs)||a.push(e.h1_vibrate_diff_abs)});let s=[],o=[],l=0;a.forEach(t=>{o=[],l=0,e.forEach(e=>{t===e.h1_vibrate_diff_abs&&(l+=e.day_vibrate,o.push(e))}),s.push({h1_vibrate_diff_abs:t,list:o,num:o.length,day_vibrate_sum:l})});let _=s.length,r=0;l=0;for(let n=0;n<_;n++)if(r+=s[n].num,l+=s[n].day_vibrate_sum,r>t)break;let i=b.toFixed(l/r,1);return i},day_5_forecast(e){let t=[];t=t.concat([0,0,0,0]);let a,s=e.length,o=0,l=0;for(let u=4;u<s-1;u++)a=e[u],a.rec_4_sum=a.day_vibrate+e[u-1].day_vibrate+e[u-2].day_vibrate+e[u-3].day_vibrate,a.vibrate_5_day=+e[u-4].day_vibrate+a.rec_4_sum,t.push(a.vibrate_5_day),l++,a.day_5_num=l,o+=a.vibrate_5_day,a.vibrate_5_day_total=o,a.vibrate_aver=b.toFixed(a.vibrate_5_day_total/a.day_5_num,0),e[u+1].tom_forecast=a.vibrate_aver-a.rec_4_sum,e[u+1].day_vibrate&&(e[u+1].forecast_vibrate=e[u+1].tom_forecast-e[u+1].day_vibrate);t.push(0);let _=g.get_ma(t,this.ma_period),r=0,i=0,n=0,h=0;for(let u=this.ma_period+4-1;u<s;u++)a.ma_vibrate_aver=_[u],u<=s-2?e[u+1].ma_tom_forecast=b.toFixed(a.ma_vibrate_aver-a.rec_4_sum,2):this.day_5_for_val=b.toFixed(a.ma_vibrate_aver-a.rec_4_sum,2),u<=s-2&&e[u+1].day_vibrate&&(e[u+1].ma_forecast_vibrate=Math.abs(e[u+1].ma_tom_forecast-e[u+1].day_vibrate),i++,r+=e[u+1].ma_forecast_vibrate,s-u<=260&&(h++,n+=e[u+1].ma_forecast_vibrate));let d=b.toFixed(r/i,5),c=b.toFixed(n/h,5);console.log("5日预测：ma_period:",this.ma_period," vibrate_aver:",d," 最近1年vibrate_aver",c," 选中日期预测:",this.day_5_for_val)},deal_hz_list(e,t){e.sort((function(e,a){return e[t]-a[t]}));let a=[];e.forEach(e=>{a.includes(e[t])||a.push(e[t])});let s=Math.max.apply(null,a),o=Math.min.apply(null,a);console.log("key:",t,"val max::",s," min",o,"  num:",a.length);let l,_=[],r={},i=[],n=[],h=[];return a.forEach(a=>{r={},i=[],r[t]=a,e.forEach(e=>{e[t]===a&&i.push(e)}),l=this.get_day_aver_obj(i),n.push(l),r["day_vibrate_aver"]=l,r["data_num"]=i.length,h.push(i.length),r["list"]=i,_.push(r)}),console.log("key_detail_list",b.copyObj(_)),this[t+"_p_list"]={key_list:a,aver_list:n,num_list:h},{key_list:a,aver_list:n,num_list:h}},deal_hz_vibrate(e,t=10){let a=[];e.forEach(e=>{a.includes(e.h1_vibrate)||a.push(e.h1_vibrate)});let s=Math.max.apply(null,a),o=Math.min.apply(null,a);console.log("h1_vibrate_list max::",s," min",o);let l=Math.floor(o/t)*t,_=Math.ceil(s/t)*t+t,r=[];for(let n=l;n<_;n+=t)r.push({begin:n,end:n+t});let i=[];return r.forEach(t=>{i=[],e.forEach(e=>{t.begin<=e.h1_vibrate&&e.h1_vibrate<t.end&&i.push(e)}),t.data_num=i.length,t.aver=this.get_day_aver_obj(i),t.list=i}),console.log("range_list ",b.copyObj(r)),r},deal_hz_vol(e,t=5e3){let a=[];e.forEach(e=>{a.includes(e.h1_vol)||a.push(e.h1_vol)});let s=Math.max.apply(null,a),o=Math.min.apply(null,a);console.log("h1_vol_list max:",s," min",o);let l=Math.floor(o/t)*t,_=Math.ceil(s/t)*t+t,r=[];for(let n=l;n<_;n+=t)r.push({begin:n,end:n+t});let i=[];return r.forEach(t=>{i=[],e.forEach(e=>{t.begin<=e.h1_vol&&e.h1_vol<t.end&&i.push(e)}),t.data_num=i.length,t.aver=this.get_day_aver_obj(i),t.list=i}),console.log("range_list ",b.copyObj(r)),r},get_day_aver_obj(e){let t=0,a=e.length;if(a){let s=0;for(let t=0;t<e.length;t++)s+=e[t].day_vibrate;t=b.toFixed(s/a,1)}return t},match_h1_vibrate(e,t=10){let a=0;this.h1_vibrate_range_list.forEach((t,s)=>{t.begin<=e&&e<t.end&&(a=s)}),console.log("h1_vibrate_idx",a);let s=this.h1_vibrate_range_list[a].data_num,o=s,l=this.h1_vibrate_range_list.length,_=0,r=0,i=0;while(o<t)_++,a-_>=0&&(r=this.h1_vibrate_range_list[a-_].data_num),a+_<=l-1&&(i=this.h1_vibrate_range_list[a+_].data_num),o=o+r+i;console.log("idx_vibrate",_," sum:",o);let n,h=0,d=0;for(let u=a-_;u<=a+_;u++)n=this.h1_vibrate_range_list[u].data_num,h+=n*this.h1_vibrate_range_list[u].aver,d+=n;let c=0;d>0&&(c=b.toFixed(h/d,2)),this.dp_day_vibrate=c,this.d_pp_data_num=d,console.log("h1_vibrate num_sum",d," aver:",c)},match_h1_vol(e,t=10){let a=0;this.h1_vol_range_list.forEach((t,s)=>{t.begin<=e&&e<t.end&&(a=s)}),console.log("h1_vol_idx",a);let s=this.h1_vol_range_list[a].data_num,o=s,l=this.h1_vol_range_list.length,_=0,r=0,i=0;while(o<t)_++,a-_>=0&&(r=this.h1_vol_range_list[a-_].data_num),a+_<=l-1&&(i=this.h1_vol_range_list[a+_].data_num),o=o+r+i;console.log("idx_vibrate",_," sum:",o);let n,h=0,d=0;for(let u=a-_;u<=a+_;u++)n=this.h1_vol_range_list[u].data_num,h+=n*this.h1_vol_range_list[u].aver,d+=n;let c=0;d>0&&(c=b.toFixed(h/d,2)),this.vp_day_vibrate=c,this.v_pp_data_num=d,console.log("h1_vol num_sum",d," aver:",c)}}};const w=a("9dcd");var x={name:"HisReplay",mixins:[m,j],data(){return{symbol:"MAM",ma_period:222,today:new Date,selected_day:new Date("2012/10/10"),selected_day_obj:null,past_list:[],day_5_for_val:0,day_obj_list:[],forecast1:0,forecast2:0,forecast_aver:0,for12_R:0,is_up_or_down:!0,input_low_or_high:0,h1_vibrate_range_list:[],h1_vol_range_list:[]}},computed:{target0:function(){let e=0;return this.input_low_or_high&&(e=this.is_up_or_down?+this.input_low_or_high+this.day_5_for_val:+this.input_low_or_high-this.day_5_for_val),b.toFixed(e,2)},target1:function(){let e=0;return this.input_low_or_high&&(e=this.is_up_or_down?+this.input_low_or_high+this.forecast1:+this.input_low_or_high-this.forecast1),b.toFixed(e,2)},target2:function(){let e=0;return this.input_low_or_high&&(e=this.is_up_or_down?+this.input_low_or_high+this.forecast2:+this.input_low_or_high-this.forecast2),b.toFixed(e,2)}},mounted(){b.longLog(),this.get_day_obj_list_csv()},methods:{get_day_obj_list_csv(){let e="xgsj_MAM_day_obj.csv";y.read_csv(e,!1,",",null,["h1_vol","h1_vibrate","day_vibrate","day_high","day_low"]).then(e=>{console.log("day_obj res1:",b.copyObj(e)),this.day_obj_list=e,this.forecast_before_10(),this.forecast_after_10()}).catch(e=>{console.error("get_his_data err:",e)})},forecast_before_10(){console.log("this.selected_day:",new Date(this.selected_day).toLocaleDateString());let e,t=-1,a=this.day_obj_list.length;for(let s=0;s<a;s++)if(e=this.day_obj_list[s],e.day===new Date(this.selected_day).toLocaleDateString()){t=s;break}t>=0?(this.select_day_obj=this.day_obj_list[t],this.past_list=this.day_obj_list.slice(0,t),console.log("select_day_obj",b.copyObj(this.select_day_obj)),console.log("past_day_list",b.copyObj(this.past_list)),this.day_5_forecast(this.past_list)):(console.log("没找到，请重新选择日期！"),this.$message.error("没找到，请重新选择日期！"))},forecast_after_10(){let e=this.select_day_obj.h1_vibrate,t=this.select_day_obj.h1_vol,a=this.select_day_obj.day_vibrate,s=new Date(this.selected_day).toLocaleDateString();console.log("选中日期 h1_vibrate:",e," h1_vol:",t),this.handle_h1_forecast(e,t,this.past_list,a,s)},statistics(e){let t,a,s,o,l,_,r,i;console.log("ma_period:",this.ma_period);let n=new w(0),h=new w(0),d=new w(0);e.length;for(let f=80;f<85;f++)t=e[f],s=t.day,o=t.h1_vibrate,l=t.h1_vol,_=t.day_vibrate,a=e.slice(0,f),({for_diff:r,for12_R:i}=this.handle_h1_forecast(o,l,a,_,s)),n=n.plus(1),h=h.plus(Math.abs(r)),d=d.plus(Math.abs(i));w.DP=2;let c=h.div(n),u=d.div(n);console.log("num:",n.toFixed(0)," f_aver:",c.toFixed(2)," R_aver:",u.toFixed(2))},get_p49_list(){let e="t2_book_p49_list.csv";y.read_csv(e,!1,",",null,["day_vibrate","h1_vibrate","h1_vol"]).then(e=>{console.log("get_p49_list res1:",b.copyObj(e)),this.handle_h1_forecast(77,68184,e)}).catch(e=>{console.error("get_p49_list err:",e)})},handle_h1_forecast(e,t,a,s=0,o){let l,_,r,i,n=[],h=[];a.forEach(a=>{l=a.h1_vol-t,r=Math.abs(l),_=a.h1_vibrate-e,i=Math.abs(_),n.push({...a,h1_vol_diff:l,h1_vol_diff_abs:r}),h.push({...a,h1_vibrate_diff:_,h1_vibrate_diff_abs:i})}),this.forecast1=this.handle_h1_vibrate_list(h),this.forecast2=this.handle_h1_vol_list(n);let d=b.toFixed(this.forecast1+this.forecast2,2);this.forecast_aver=b.toFixed(d/2,2),this.for12_R=b.toFixed(Math.abs(this.forecast1-this.forecast_aver),2),console.log("day:",o,"\tr1:",this.forecast1,"\tr2:",this.forecast2,"\taver",this.forecast_aver,"\tR:",this.for12_R);b.toFixed(this.forecast_aver-s,2)},get_p64_list(){let e="t2_book_p64_list.csv";y.read_csv(e,!1,",",null,["day_vibrate"]).then(e=>{console.log("get_p64_list res1:",b.copyObj(e)),this.deal_day_vibrate(e)}).catch(e=>{console.error("get_p64_list err:",e)})}}},k=x,E=(a("54d8"),Object(_["a"])(k,d,c,!1,null,"40dfa1f6",null)),O=E.exports;s["default"].use(h["a"]);const M=[{path:"/",name:"Home",component:O}],F=new h["a"]({mode:"history",base:"/",routes:M});var z=F,D=a("2f62");s["default"].use(D["a"]);var S=new D["a"].Store({state:{},mutations:{},actions:{},modules:{}}),L=a("5c96"),C=a.n(L);a("0fae");s["default"].use(C.a),s["default"].config.productionTip=!1,new s["default"]({router:z,store:S,render:e=>e(n)}).$mount("#app")},"85ec":function(e,t,a){}});
//# sourceMappingURL=app.3bcac921.js.map