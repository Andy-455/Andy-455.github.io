(function(e){function t(t){for(var s,r,_=t[0],i=t[1],n=t[2],d=0,c=[];d<_.length;d++)r=_[d],Object.prototype.hasOwnProperty.call(l,r)&&l[r]&&c.push(l[r][0]),l[r]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);h&&h(t);while(c.length)c.shift()();return o.push.apply(o,n||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,_=1;_<a.length;_++){var i=a[_];0!==l[i]&&(s=!1)}s&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},l={app:0},o=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var _=window["webpackJsonp"]=window["webpackJsonp"]||[],i=_.push.bind(_);_.push=t,_=_.slice();for(var n=0;n<_.length;n++)t(_[n]);var h=i;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"0dfe":function(e,t,a){},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function l(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=o,e.exports=l,l.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],r=(a("034f"),a("2877")),_={},i=Object(r["a"])(_,l,o,!1,null,null,null),n=i.exports,h=a("8c4f"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"HisReplay"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.xgsj_5_to_day}},[e._v("xgsj 5整成天")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save_data}},[e._v("存csv")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.get_day_obj_list_csv}},[e._v("day_vibrate 预测")]),a("br"),e._m(0),a("el-date-picker",{staticClass:"small_width",attrs:{type:"date",placeholder:"选择日期"},model:{value:e.selected_day,callback:function(t){e.selected_day=t},expression:"selected_day"}}),a("br"),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.forecast_before_10}},[e._v("10点前预测")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.forecast_after_10}},[e._v("10点后预测")]),a("br"),a("div",[a("div",[e._v("5日预测："+e._s(e.day_5_for_val))]),a("div",[e._v("早盘预测：均值: "+e._s(e.forecast_aver)+" -----范围："+e._s(e.for12_R))])])],1)},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h4",[e._v("一天准备：")]),a("p",[e._v("30分")]),a("p",[e._v("60分统计资料")]),a("p",[e._v("近一个月高低表")]),a("p",[e._v("近期日震幅变化")])])}],b=a("c1df"),f=a.n(b),u={is_in_company:!0,is_output_log:!1,his_date_date:"2021_12_20",show_need_bar_num:80,longLog(){console.log("-------------------------------------------------------------------------------")},copyObj(e){return JSON.parse(JSON.stringify(e||""))},toFixed(e,t){let a=Number(e||0),s=a.toFixed(t),l=Number(s||0);return l},openInTV(e){let t=e.split(":"),a=t[0],s=t[1],l=`https://cn.tradingview.com/chart/0ZToVShK/?symbol=${a}%3A${s}`;window.open(l)}},v={find_in_time(e,t){let a,s,l=-1,o=!1;for(a=e.length-1;a>=0;a--){s=e[a],u.is_output_log&&a<3&&console.log("i: "+a+" date",s);let r=f()(s).format("YYYY-MM-DD")==f()(t).format("YYYY-MM-DD"),_=f()(s).valueOf()<=f()(t).valueOf();o||!r&&!_||(o=!0,l=a)}return l},boll_open(e,t,a){let s,l,o=[];e.forEach((e,a)=>{s=t[a],l=e-s,l=u.toFixed(l,5),o.push(l)});let r=this.price_rise(o,a);return r},get_indicate_price_rise2(e=[2,1,0,3,4,5,4,7,8,10]){let t,a,s=[],l=365/7*5;return e.forEach((function(o,r){0==r?s[r]=0:(a=e[r-1],t=e[r]-a,s[r]=a>0?u.toFixed(t/a*100*l,1):0)})),s},price_rise_rate(e,t){let a=0,s=e.length;if(t[0]>s)return void console.error("price_rise idx_list 下标越界");let l,o,r=!0,_=t.length;for(let u=0;u<_-1;u++)l=t[u],o=t[u+1],e[s-l]>e[s-o]&&(r=!1);let i=!0;for(let u=0;u<_-1;u++)l=t[u],o=t[u+1],e[s-l]<e[s-o]&&(i=!1);l=t[0],o=t[_-1];let n=e[s-o],h=e[s-l],d=n-h,c=0,b=365/7*5,f=l-o;return h>0&&(c=u.toFixed(d/n*100/f*b,1)),a=r||i?c:-999,a},get_list_1_2_yearly_rate(e,t,a,s){if(e.length!=t.length)return console.warn(a.symbol+"  "+s+" list1, list2长度不一致！",a),-999;if(e.length<2)return console.warn(a.symbol+"  "+s+" list1长度过短！",a),-999;if(t.length<2)return console.warn(a.symbol+"  "+s+" list2长度过短！",a),-999;let l=0,o=e.length,r=e[o-1]-t[o-1],_=e[o-2]-t[o-2],i=365/7*5;if(_&&_>0){let e=(r-_)/_;s.startsWith("boll_")&&(e/=4),l=e*i,l*=100,l=u.toFixed(l,3)}return l},get_yearly_rate(e){let t=0,a=e.length;if(a<2)return console.warn("get_yearly_rate ma_list长度过短！"),-999;let s=e[a-1],l=e[a-2],o=365/7*5;if(l&&l>0){let e=(s-l)/l;t=e*o,t*=100,t=u.toFixed(t,3)}return t},get_indicate_yearly_rate(e=[2,1,0,3,4,5,4,7,8,10]){let t=[],a=this;return e.forEach((function(s,l){if(l<1)t[l]=0;else{let s=e.slice(l-1,l+1);t[l]=a.get_yearly_rate(s)}})),t},get_indicate_boll_open(e,t,a){let s,l,o,r=[];e.forEach((e,a)=>{s=t[a],l=e-s,o=u.toFixed(l/4,5),r.push(o)});let _=this.get_indicate_price_rise(r,a);return _},get_indicate_2ma_open(e,t,a){let s,l,o,r=[];e.forEach((e,a)=>{s=t[a],l=e-s,o=u.toFixed(l,5),r.push(o)});let _=this.get_indicate_price_rise(r,a);return _},get_indicate_price_rise(e=[2,1,0,3,4,5,4,7,8,10],t=[3,2,1]){let a=[],s=t[0],l=this;return e.forEach((function(o,r){if(r<s-1)a[r]=-999999;else{let o=r+1,_=o-s,i=e.slice(_,o);a[r]=l.price_rise_rate(i,t)}})),a},get_ma(e,t=20){let a=[];return e.forEach((function(s,l){if(l<t-1)a[l]="";else{let s=0;for(let a=0;a<t;a++)s+=e[l-a];let o=s/t;a[l]=Number(o.toFixed(3)||0)}})),a},get_boll(e,t,a){void 0===t&&(t=20),void 0===a&&(a=2);var s=[[],[],[]],l=s[0],o=s[1],r=s[2],_=[0,0],i=_[0],n=_[1],h=t-1;let d=0,c=0,b=0;return e.forEach((function(s,_){i+=s;var f=[0,0,0,0],u=f[0],v=f[1],g=f[2],p=f[3];_>=h?(i-=n,n=e[p=_-h],u=i/t,g=e.slice(p,p+t).reduce((function(e,t){return e+Math.pow(t-u,2)}),0),v=Math.sqrt(g/t),d=u,o[_]=Number(d.toFixed(5)||0),c=u+a*v,l[_]=Number(c.toFixed(5)||0),b=u-a*v,r[_]=Number(b.toFixed(5)||0)):(l[_]=0,o[_]=0,r[_]=0)})),l.forEach((e,t)=>{0==e&&(l[t]="")}),o.forEach((e,t)=>{0==e&&(o[t]="")}),r.forEach((e,t)=>{0==e&&(r[t]="")}),{up:l,ma:o,low:r}}},g=a("bc3a"),p=a.n(g),y={keyFun(e){e=e.trim();let t=e.length,a=e.substring(1,t-1);return a=a.toLowerCase(),a},csv_to_list(e,t=!1,a=",",s=!1){return new Promise((function(l,o){p.a.get(e,{responseType:"blob"}).then(e=>{let o=new FileReader;o.readAsText(e.data),o.onload=function(e){let o,r=e.target.result,_=r.split(/\r?\n|\r/),i="",n="";u.is_output_log&&console.log(" readCsv has_header_name: ",t),s?o=_:t?[i,n,...o]=_:[n,...o]=_;let h=t&&i?i.split(a):[];u.is_output_log&&console.log(" readCsv reader headerNameList: ",h);let d=n?n.split(a):[];u.is_output_log&&console.log(" readCsv reader headerCodeList: ",d),u.is_output_log&&console.log("readCsv reader dataStrList[1:11]\n",o.slice(0,11)),l({headerNameList:h,headerCodeList:d,dataStrList:o})}}).catch(e=>{o(e)})}))},read_csv(e,t=!1,a=",",s=null,l=null){let o=this;return new Promise((function(r,_){o.csv_to_list(e,t,a).then(({headerCodeList:e,dataStrList:t})=>{u.is_output_log&&console.log("read_csv res:",e);let o,_,i,n=[];t.forEach(t=>{t&&(i={},_=t.split(a),u.is_output_log&&console.log("read_csv csvLineList:",_),e.forEach((e,t)=>{s&&(e=s(e)),o=_[t],l&&l.includes(e)&&(o=Number(o||0),o=u.toFixed(o,4)),i[e]=o}),u.is_output_log&&console.log("csv_line_data:",i),n.push(i))}),r(n)}).catch(e=>{console.error("read_csv err:",e),_(e)})}))},save_data_to_csv(e,t,a=["date_time","ctm","open","high","low","close","vol"]){let s,l=a.join();l+="\r\n",e.forEach(e=>{a.forEach(t=>{s=e[t],l+="vol"===t?s:s+","}),l+="\r\n"}),l="data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(l);let o=document.createElement("a");o.href=l,o.download=t+".csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)}},m={data(){return{}},methods:{xgsj_5_to_day(){let e="xgsj_MAM_5m.csv";y.read_csv(e,!1,",",null,["open","high","low","close","vol"]).then(e=>{console.log("get_his_data res1:",u.copyObj(e)),e=this.data_format2(e),console.log("get_his_data res4:",u.copyObj(e)),e=this.get_whole_day_list(e),console.log("get_his_data res5:",u.copyObj(e));let{day_list:t,day_obj_list:a}=this.get_day_obj_list(e,5);this.day_obj_list=a}).catch(e=>{console.error("get_his_data err:",e)})},get_day_list(e){let t=[];e.forEach(e=>{t.includes(e.date)||t.push(e.date)}),console.log("day_list:",t);let a,s,l=[],o=[];t.forEach(t=>{o=[],e.forEach(e=>{a&&e.date===a&&e.hour>15&&o.push(e),e.date===t&&e.hour<=15&&o.push(e)}),a=t;let{open:r,high:_,low:i,close:n,vol:h}=this.handle_day_ohlc(o);s={day:t+" 15:00:00",list:o,open:r,high:_,low:i,close:n,vol:h},l.push(s)}),console.log("day_obj_list",u.copyObj(l));let r=this.symbol+"_d1";y.save_data_to_csv(l,r,["day","open","high","low","close","vol"])},handle_day_ohlc(e){let t=0,a=0,s=0,l=e.length;e[0]&&e[0].open&&(t=e[0].open),l-1>=0&&e[l-1]&&e[l-1].close&&(a=e[l-1].close);let o,r,_=[],i=[];return e.forEach(e=>{_.push(e.high),i.push(e.low),s+=e.vol}),_.length&&(o=Math.max.apply(null,_)),i.length&&(r=Math.min.apply(null,i)),{open:t,high:o,low:r,close:a,vol:s}},data_format2(e){let t,a,s,l;return e.forEach(e=>{t=new Date(e.t_time),a=t.toLocaleDateString(),s=t.toTimeString().slice(0,5),l=a+" "+s,e.date=a,e.time=s,e.week_day=t.getDay(),e.date_time=l,e.year=t.getFullYear(),e.hour=t.getHours()}),e},jjsj_15_to_day(){let e="jjsj/MA9999_m15.csv";y.read_csv(e,!1,",",null,["open","high","low","close","vol"]).then(e=>{console.log("get_his_data res1:",u.copyObj(e)),e=this.time_subtract_15_m(e),console.log("get_his_data res3:",u.copyObj(e)),e=this.data_format(e),console.log("get_his_data res4:",u.copyObj(e)),e=this.get_whole_day_list(e),console.log("get_his_data res5:",u.copyObj(e));let{day_list:t,day_obj_list:a}=this.get_day_obj_list(e);this.day_obj_list=a}).catch(e=>{console.error("get_his_data err:",e)})},tbj_15_to_day(){let e="tbj/MAM_m15.csv";y.read_csv(e,!1,",",null,["open","high","low","close","vol"]).then(e=>{console.log("get_his_data res1:",u.copyObj(e)),e=this.time_subtract_15_m(e),console.log("get_his_data res3:",u.copyObj(e)),e=this.data_format(e),console.log("get_his_data res4:",u.copyObj(e)),e=this.get_whole_day_list(e),console.log("get_his_data res5:",u.copyObj(e));let{day_list:t,day_obj_list:a}=this.get_day_obj_list(e);this.day_obj_list=a}).catch(e=>{console.error("get_his_data err:",e)})},tdx_15_to_day(){let e="tdx/MAL8_m15.csv";y.read_csv(e,!1,",",null,["open","high","low","close","vol"]).then(e=>{e=this.deal_tdx_night(e),e=this.time_subtract_15_m(e),console.log("get_his_data res3:",u.copyObj(e)),e=this.data_format(e),console.log("get_his_data res:",u.copyObj(e)),e=this.get_whole_day_list(e);let{day_list:t,day_obj_list:a}=this.get_day_obj_list(e);this.day_obj_list=a}).catch(e=>{console.error("get_his_data err:",e)})},save_data(){let e=this.symbol+"_day_obj";y.save_data_to_csv(this.day_obj_list,e,["day","h1_vol","h1_vibrate","day_vibrate","day_high","day_low"])},get_day_obj_list(e,t){let a=[];e.forEach(e=>{a.includes(e.date)||a.push(e.date)}),console.log("day_list:",a);let s,l=[],o=[],r=[],_=[];return a.forEach(a=>{o=[],r=[],_=[],e.forEach(e=>{e.date===a&&(o.push(e),9==e.hour&&r.push(e),9<=e.hour&&e.hour<=15&&_.push(e))}),0===r.length&&console.warn("day_str:",a," h1_list.length === 0");let{h1_vol:i,h1_vibrate:n}=this.handle_h1(r,t);0===_.length&&console.warn("day_str:",a," bt_list.length === 0");let{day_vibrate:h,day_high:d,day_low:c}=this.handle_bt(_,t);s={day:a,h1_vol:i,h1_vibrate:n,list:o,h1_list:r,bt_list:_,day_vibrate:h,day_high:d,day_low:c},l.push(s)}),console.log("day_obj_list",u.copyObj(l)),{day_list:a,day_obj_list:l}},handle_h1(e,t=15){let a=0,s=0,l=4;15!==t&&(l=60/t),e.length!=l&&(15!==t||console.warn(e[0].t_time,"h1_list不是"+l+"个:",u.copyObj(e)));let o,r,_=[],i=[];return e.forEach(e=>{_.push(e.high),i.push(e.low),a+=e.vol}),_.length&&(o=Math.max.apply(null,_)),i.length&&(r=Math.min.apply(null,i)),o&&r&&(s=o-r),{h1_vol:a,h1_vibrate:s}},getZero(e){return parseInt(e)<10&&(e="0"+e),e},handle_bt(e,t=15){let a=15;if(15!==t&&(a=225/t),e.length!=a)if(15!==t){let t,s=[];for(let e=0;e<=55;e+=5)t="09:"+this.getZero(e),s.push(t);for(let e=0;e<=10;e+=5)t="10:"+this.getZero(e),s.push(t);for(let e=30;e<=55;e+=5)t="10:"+this.getZero(e),s.push(t);for(let e=0;e<=25;e+=5)t="11:"+this.getZero(e),s.push(t);for(let e=30;e<=55;e+=5)t="13:"+this.getZero(e),s.push(t);for(let e=0;e<=55;e+=5)t="14:"+this.getZero(e),s.push(t);let l=!1,o=[];s.forEach(t=>{l=!1,e.forEach(e=>{e.time===t&&(l=!0)}),l||o.push(t)}),console.warn(e[0].date,"9点到15点K线数量不是"+a+"个，缺失 "+o.length+"个，分别是:",o)}else console.warn(e[0].t_time,"bt_list不是"+a+"个:",u.copyObj(e));let s,l,o=0,r=[],_=[];return e.forEach(e=>{r.push(e.high),_.push(e.low)}),r.length&&(s=Math.max.apply(null,r)),_.length&&(l=Math.min.apply(null,_)),s&&l&&(o=s-l),{day_vibrate:o,day_high:s,day_low:l}},get_whole_day_list(e){let t,a=e.length;for(let l=0;l<a;l++)if(l>0&&9===e[l].hour&&e[l-1].date!==e[l].date){console.log("第一个完整天 idx:",l," 值：",u.copyObj(e[l])),t=l;break}let s=e.slice(t);return s},data_format(e){let t,a,s;return e.forEach(e=>{t=new Date(e.ctm),a=t.toLocaleDateString(),s=t.toTimeString().slice(0,8),e.date=a,e.time=s,e.week_day=t.getDay(),e.hour=t.getHours()}),e},deal_tdx_night(e){let t,a,s,l,o="";return e.forEach((e,r)=>{t=new Date(e.t_time),s=t.toLocaleDateString(),l=t.toTimeString().slice(0,5),a=t.getHours(),a>19?o&&o!==s&&(e.t_time=o+"-"+l):o=s}),e},time_subtract_15_m(e){let t,a,s,l,o,r;return e.forEach(e=>{t=new Date(e.t_time),a=t.getTime(),s=a-9e5,l=new Date(s),o=l.toLocaleDateString(),r=l.toTimeString().slice(0,5),e.ctm=s,e.date_time=o+" "+r}),e},deal_his_data(e){}}},j={data(){return{}},methods:{handle_h1_vol_list(e,t=20){e.sort((function(e,t){return e.h1_vol_diff_abs-t.h1_vol_diff_abs}));let a=[];e.forEach(e=>{a.includes(e.h1_vol_diff_abs)||a.push(e.h1_vol_diff_abs)});let s=[],l=[],o=0;a.forEach(t=>{l=[],o=0,e.forEach(e=>{t===e.h1_vol_diff_abs&&(o+=e.day_vibrate,l.push(e))}),s.push({h1_vol_diff_abs:t,list:l,num:l.length,day_vibrate_sum:o})});let r=s.length,_=0;o=0;for(let n=0;n<r;n++)if(_+=s[n].num,o+=s[n].day_vibrate_sum,_>t)break;let i=u.toFixed(o/_,1);return i},handle_h1_list(e,t=!0,a=20){let s=t?"h1_vibrate_diff_abs":"";e.sort((function(e,t){return e[s]-t[s]})),console.log("h1_list:",u.copyObj(e));let l=[];e.forEach(e=>{l.includes(e[s])||l.push(e[s])}),console.log("h1_diff_abs_list:",u.copyObj(l));let o=[],r=[],_=0;l.forEach(t=>{r=[],_=0,e.forEach(e=>{t===e.h1_vibrate_diff_abs&&(_+=e.day_vibrate,r.push(e))}),o.push({h1_vibrate_diff_abs:t,list:r,num:r.length,day_vibrate_sum:_})});let i=o.length,n=0;_=0;for(let d=0;d<i;d++)if(n+=o[d].num,_+=o[d].day_vibrate_sum,n>a)break;let h=u.toFixed(_/n,1);return h},handle_h1_vibrate_list(e,t=20){e.sort((function(e,t){return e.h1_vibrate_diff_abs-t.h1_vibrate_diff_abs}));let a=[];e.forEach(e=>{a.includes(e.h1_vibrate_diff_abs)||a.push(e.h1_vibrate_diff_abs)});let s=[],l=[],o=0;a.forEach(t=>{l=[],o=0,e.forEach(e=>{t===e.h1_vibrate_diff_abs&&(o+=e.day_vibrate,l.push(e))}),s.push({h1_vibrate_diff_abs:t,list:l,num:l.length,day_vibrate_sum:o})});let r=s.length,_=0;o=0;for(let n=0;n<r;n++)if(_+=s[n].num,o+=s[n].day_vibrate_sum,_>t)break;let i=u.toFixed(o/_,1);return i},day_5_forecast(e){let t=[];t=t.concat([0,0,0,0]);let a,s=e.length,l=0,o=0;for(let b=4;b<s-1;b++)a=e[b],a.rec_4_sum=a.day_vibrate+e[b-1].day_vibrate+e[b-2].day_vibrate+e[b-3].day_vibrate,a.vibrate_5_day=+e[b-4].day_vibrate+a.rec_4_sum,t.push(a.vibrate_5_day),o++,a.day_5_num=o,l+=a.vibrate_5_day,a.vibrate_5_day_total=l,a.vibrate_aver=u.toFixed(a.vibrate_5_day_total/a.day_5_num,0),e[b+1].tom_forecast=a.vibrate_aver-a.rec_4_sum,e[b+1].day_vibrate&&(e[b+1].forecast_vibrate=e[b+1].tom_forecast-e[b+1].day_vibrate);t.push(0);let r=v.get_ma(t,this.ma_period),_=0,i=0,n=0,h=0;for(let b=this.ma_period+4-1;b<s;b++)a.ma_vibrate_aver=r[b],b<=s-2?e[b+1].ma_tom_forecast=u.toFixed(a.ma_vibrate_aver-a.rec_4_sum,2):this.day_5_for_val=u.toFixed(a.ma_vibrate_aver-a.rec_4_sum,2),b<=s-2&&e[b+1].day_vibrate&&(e[b+1].ma_forecast_vibrate=Math.abs(e[b+1].ma_tom_forecast-e[b+1].day_vibrate),i++,_+=e[b+1].ma_forecast_vibrate,s-b<=260&&(h++,n+=e[b+1].ma_forecast_vibrate));let d=u.toFixed(_/i,5),c=u.toFixed(n/h,5);console.log("5日预测：ma_period:",this.ma_period," vibrate_aver:",d," 最近1年vibrate_aver",c," 选中日期预测:",this.day_5_for_val)},deal_hz_list(e,t){e.sort((function(e,a){return e[t]-a[t]}));let a=[];e.forEach(e=>{a.includes(e[t])||a.push(e[t])});let s=Math.max.apply(null,a),l=Math.min.apply(null,a);console.log("key:",t,"val max::",s," min",l,"  num:",a.length);let o,r=[],_={},i=[],n=[],h=[];return a.forEach(a=>{_={},i=[],_[t]=a,e.forEach(e=>{e[t]===a&&i.push(e)}),o=this.get_day_aver_obj(i),n.push(o),_["day_vibrate_aver"]=o,_["data_num"]=i.length,h.push(i.length),_["list"]=i,r.push(_)}),console.log("key_detail_list",u.copyObj(r)),this[t+"_p_list"]={key_list:a,aver_list:n,num_list:h},{key_list:a,aver_list:n,num_list:h}},deal_hz_vibrate(e,t=10){let a=[];e.forEach(e=>{a.includes(e.h1_vibrate)||a.push(e.h1_vibrate)});let s=Math.max.apply(null,a),l=Math.min.apply(null,a);console.log("h1_vibrate_list max::",s," min",l);let o=Math.floor(l/t)*t,r=Math.ceil(s/t)*t+t,_=[];for(let n=o;n<r;n+=t)_.push({begin:n,end:n+t});let i=[];return _.forEach(t=>{i=[],e.forEach(e=>{t.begin<=e.h1_vibrate&&e.h1_vibrate<t.end&&i.push(e)}),t.data_num=i.length,t.aver=this.get_day_aver_obj(i),t.list=i}),console.log("range_list ",u.copyObj(_)),_},deal_hz_vol(e,t=5e3){let a=[];e.forEach(e=>{a.includes(e.h1_vol)||a.push(e.h1_vol)});let s=Math.max.apply(null,a),l=Math.min.apply(null,a);console.log("h1_vol_list max:",s," min",l);let o=Math.floor(l/t)*t,r=Math.ceil(s/t)*t+t,_=[];for(let n=o;n<r;n+=t)_.push({begin:n,end:n+t});let i=[];return _.forEach(t=>{i=[],e.forEach(e=>{t.begin<=e.h1_vol&&e.h1_vol<t.end&&i.push(e)}),t.data_num=i.length,t.aver=this.get_day_aver_obj(i),t.list=i}),console.log("range_list ",u.copyObj(_)),_},get_day_aver_obj(e){let t=0,a=e.length;if(a){let s=0;for(let t=0;t<e.length;t++)s+=e[t].day_vibrate;t=u.toFixed(s/a,1)}return t},match_h1_vibrate(e,t=10){let a=0;this.h1_vibrate_range_list.forEach((t,s)=>{t.begin<=e&&e<t.end&&(a=s)}),console.log("h1_vibrate_idx",a);let s=this.h1_vibrate_range_list[a].data_num,l=s,o=this.h1_vibrate_range_list.length,r=0,_=0,i=0;while(l<t)r++,a-r>=0&&(_=this.h1_vibrate_range_list[a-r].data_num),a+r<=o-1&&(i=this.h1_vibrate_range_list[a+r].data_num),l=l+_+i;console.log("idx_vibrate",r," sum:",l);let n,h=0,d=0;for(let b=a-r;b<=a+r;b++)n=this.h1_vibrate_range_list[b].data_num,h+=n*this.h1_vibrate_range_list[b].aver,d+=n;let c=0;d>0&&(c=u.toFixed(h/d,2)),this.dp_day_vibrate=c,this.d_pp_data_num=d,console.log("h1_vibrate num_sum",d," aver:",c)},match_h1_vol(e,t=10){let a=0;this.h1_vol_range_list.forEach((t,s)=>{t.begin<=e&&e<t.end&&(a=s)}),console.log("h1_vol_idx",a);let s=this.h1_vol_range_list[a].data_num,l=s,o=this.h1_vol_range_list.length,r=0,_=0,i=0;while(l<t)r++,a-r>=0&&(_=this.h1_vol_range_list[a-r].data_num),a+r<=o-1&&(i=this.h1_vol_range_list[a+r].data_num),l=l+_+i;console.log("idx_vibrate",r," sum:",l);let n,h=0,d=0;for(let b=a-r;b<=a+r;b++)n=this.h1_vol_range_list[b].data_num,h+=n*this.h1_vol_range_list[b].aver,d+=n;let c=0;d>0&&(c=u.toFixed(h/d,2)),this.vp_day_vibrate=c,this.v_pp_data_num=d,console.log("h1_vol num_sum",d," aver:",c)}}};const w=a("9dcd");var x={name:"HisReplay",mixins:[m,j],data(){return{symbol:"MAM",ma_period:222,today:new Date,selected_day:new Date("2012/10/10"),selected_day_obj:null,past_list:[],day_5_for_val:0,day_obj_list:[],forecast_aver:0,for12_R:0,h1_vibrate_range_list:[],h1_vol_range_list:[]}},mounted(){u.longLog(),this.get_day_obj_list_csv()},methods:{get_day_obj_list_csv(){let e="xgsj_MAM_day_obj.csv";y.read_csv(e,!1,",",null,["h1_vol","h1_vibrate","day_vibrate","day_high","day_low"]).then(e=>{console.log("day_obj res1:",u.copyObj(e)),this.day_obj_list=e,this.forecast_before_10(),this.forecast_after_10()}).catch(e=>{console.error("get_his_data err:",e)})},forecast_before_10(){console.log("this.selected_day:",new Date(this.selected_day).toLocaleDateString());let e,t=-1,a=this.day_obj_list.length;for(let s=0;s<a;s++)if(e=this.day_obj_list[s],e.day===new Date(this.selected_day).toLocaleDateString()){t=s;break}t>=0?(this.select_day_obj=this.day_obj_list[t],this.past_list=this.day_obj_list.slice(0,t),console.log("select_day_obj",u.copyObj(this.select_day_obj)),console.log("past_day_list",u.copyObj(this.past_list)),this.day_5_forecast(this.past_list)):(console.log("没找到，请重新选择日期！"),this.$message.error("没找到，请重新选择日期！"))},forecast_after_10(){let e=this.select_day_obj.h1_vibrate,t=this.select_day_obj.h1_vol,a=this.select_day_obj.day_vibrate,s=new Date(this.selected_day).toLocaleDateString();console.log("选中日期 h1_vibrate:",e," h1_vol:",t),this.handle_h1_forecast(e,t,this.past_list,a,s)},statistics(e){let t,a,s,l,o,r,_,i;console.log("ma_period:",this.ma_period);let n=new w(0),h=new w(0),d=new w(0);e.length;for(let f=80;f<85;f++)t=e[f],s=t.day,l=t.h1_vibrate,o=t.h1_vol,r=t.day_vibrate,a=e.slice(0,f),({for_diff:_,for12_R:i}=this.handle_h1_forecast(l,o,a,r,s)),n=n.plus(1),h=h.plus(Math.abs(_)),d=d.plus(Math.abs(i));w.DP=2;let c=h.div(n),b=d.div(n);console.log("num:",n.toFixed(0)," f_aver:",c.toFixed(2)," R_aver:",b.toFixed(2))},get_p49_list(){let e="t2_book_p49_list.csv";y.read_csv(e,!1,",",null,["day_vibrate","h1_vibrate","h1_vol"]).then(e=>{console.log("get_p49_list res1:",u.copyObj(e)),this.handle_h1_forecast(77,68184,e)}).catch(e=>{console.error("get_p49_list err:",e)})},handle_h1_forecast(e,t,a,s=0,l){let o,r,_,i,n=[],h=[];a.forEach(a=>{o=a.h1_vol-t,_=Math.abs(o),r=a.h1_vibrate-e,i=Math.abs(r),n.push({...a,h1_vol_diff:o,h1_vol_diff_abs:_}),h.push({...a,h1_vibrate_diff:r,h1_vibrate_diff_abs:i})});let d=this.handle_h1_vibrate_list(h),c=this.handle_h1_vol_list(n),b=d+c;this.forecast_aver=u.toFixed(b/2,2),this.for12_R=u.toFixed(Math.abs(d-this.forecast_aver),2),console.log("day:",l,"\tr1:",d,"\tr2:",c,"\taver",this.forecast_aver,"\tR:",this.for12_R);u.toFixed(this.forecast_aver-s,2)},get_p64_list(){let e="t2_book_p64_list.csv";y.read_csv(e,!1,",",null,["day_vibrate"]).then(e=>{console.log("get_p64_list res1:",u.copyObj(e)),this.deal_day_vibrate(e)}).catch(e=>{console.error("get_p64_list err:",e)})}}},E=x,k=(a("ab99"),Object(r["a"])(E,d,c,!1,null,"f4a78214",null)),O=k.exports;s["default"].use(h["a"]);const M=[{path:"/",name:"Home",component:O}],F=new h["a"]({mode:"history",base:"/",routes:M});var z=F,D=a("2f62");s["default"].use(D["a"]);var S=new D["a"].Store({state:{},mutations:{},actions:{},modules:{}}),L=a("5c96"),C=a.n(L);a("0fae");s["default"].use(C.a),s["default"].config.productionTip=!1,new s["default"]({router:z,store:S,render:e=>e(n)}).$mount("#app")},"85ec":function(e,t,a){},ab99:function(e,t,a){"use strict";a("0dfe")}});
//# sourceMappingURL=app.3a8936f7.js.map